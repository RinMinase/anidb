# build-job:
# - restore_cache:
#   name: Restore Yarn Package Cache
#   keys:
#   - yarn-packages-{{ checksum "yarn.lock" }}
# - run:
#   name: Install Dependencies
#   command: yarn install
# - save_cache:
#   name: Save Yarn Package Cache
#   key: yarn-packages-{{ checksum "yarn.lock" }}
#   paths:
#     - ~/.cache/yarn

# deploy-job:
#   working_directory: /dist
#   steps:
#   - run:
#     name: Deploy Master to Firebase
#     command: ./node_modules/.bin/firebase deploy --token=$FIREBASE_DEPLOY_TOKEN

# workflows:
#   version: 2

#   -deploy:
#     jobs:
#     - build-job
#     - deploy-job:
#       requires:
#       - build-job
#       filters:
#         branches:
#           only: master

version: 2
jobs:
  build:
    docker:
      - image: circleci/node:10.12
    steps:
      - checkout

      - restore_cache:
          keys:
            - dependency-cache-{{ checksum "yarn.lock" }}
            - dependency-cache-
      - run: yarn install
      - save_cache:
          key: dependency-cache-{{ checksum "yarn.lock" }}
          paths:
            - ~/.cache/yarn
            - ./node_modules

      # - run: yarn test
      - run: yarn build-np
